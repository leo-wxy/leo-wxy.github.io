<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Java - 注解"><meta name="keywords" content="Java"><meta name="author" content="Leo-Wxy"><meta name="copyright" content="Leo-Wxy"><title>Java - 注解 | Wxy的个人博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#基础概念"><span class="toc-number">1.</span> <span class="toc-text">基础概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#元数据"><span class="toc-number">1.1.</span> <span class="toc-text">元数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注解概念"><span class="toc-number">1.2.</span> <span class="toc-text">注解概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#注解作用"><span class="toc-number">1.3.</span> <span class="toc-text">注解作用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#注解分类"><span class="toc-number">2.</span> <span class="toc-text">注解分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#元注解"><span class="toc-number">2.1.</span> <span class="toc-text">元注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Retention"><span class="toc-number">2.1.1.</span> <span class="toc-text">@Retention</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Documented"><span class="toc-number">2.1.2.</span> <span class="toc-text">@Documented</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Target"><span class="toc-number">2.1.3.</span> <span class="toc-text">@Target</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Inherited"><span class="toc-number">2.1.4.</span> <span class="toc-text">@Inherited</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Repeatable"><span class="toc-number">2.1.5.</span> <span class="toc-text">@Repeatable</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java内置注解"><span class="toc-number">2.2.</span> <span class="toc-text">Java内置注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Override"><span class="toc-number">2.2.1.</span> <span class="toc-text">@Override</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Deprecated"><span class="toc-number">2.2.2.</span> <span class="toc-text">@Deprecated</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SuppressWarnings"><span class="toc-number">2.2.3.</span> <span class="toc-text">@SuppressWarnings</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FunctionalInterface"><span class="toc-number">2.2.4.</span> <span class="toc-text">@FunctionalInterface</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义注解"><span class="toc-number">2.3.</span> <span class="toc-text">自定义注解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#运行时注解"><span class="toc-number">2.3.1.</span> <span class="toc-text">运行时注解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#定义注解"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">定义注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#注解解析"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">注解解析</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#获取类的注解信息"><span class="toc-number">2.3.1.2.1.</span> <span class="toc-text">获取类的注解信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#获取方法的注解信息"><span class="toc-number">2.3.1.2.2.</span> <span class="toc-text">获取方法的注解信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#获取变量的注解信息"><span class="toc-number">2.3.1.2.3.</span> <span class="toc-text">获取变量的注解信息</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编译时注解"><span class="toc-number">2.3.2.</span> <span class="toc-text">编译时注解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#定义注解-1"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">定义注解</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#注解解析-1"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">注解解析</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内容引用"><span class="toc-number">3.</span> <span class="toc-text">内容引用</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/images/avatar.png"></div><div class="author-info__name text-center">Leo-Wxy</div><div class="author-info__description text-center">如果我没有见过光明，那我本可以忍受黑暗</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">128</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">19</span></a></div></div></div><div id="content-outer"><div class="plain" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Wxy的个人博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> 搜索</span></a></span></div></div><div class="layout" id="content-inner"><article id="post"><div class="plain" id="post-title">Java - 注解</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-02-19</time></div><div class="article-container" id="post-content"><span itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"><img itemprop="url image" src="/images/Java-注解.png" class="full-image" alt="注解基础知识" title="注解基础知识"><meta itemprop="width" content="auto"><meta itemprop="height" content="auto"></span>
<h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><h3 id="元数据"><a href="#元数据" class="headerlink" title="元数据"></a>元数据</h3><blockquote>
<p>元数据是关于数据的数据，元数据是添加到程序元素入方法、字段、类和包上的额外信息。对数据进行说明描述。</p>
</blockquote>
<p>元数据可用于以下场景：</p>
<ul>
<li><strong>编写文档</strong>：根据程序元素的注释创建文档</li>
<li><strong>代码分析</strong>：通过标识的元数据对代码进行分析(<em>例如声明方法重载</em>)</li>
<li><strong>编译检查</strong>：让编译器实现基本的编译检查，例如<em>@notNull——不为空</em></li>
</ul>
<p><strong>Java平台的元数据体现 就在于注解(Annotation)。</strong></p>
<h3 id="注解概念"><a href="#注解概念" class="headerlink" title="注解概念"></a>注解概念</h3><blockquote>
<p>与Java 5之后引入的一个特性，可以声明在<code>类、包、字段、方法、局部变量、方法参数等的前面</code>。多用于<strong>标识/解释代码</strong>。</p>
</blockquote>
<h3 id="注解作用"><a href="#注解作用" class="headerlink" title="注解作用"></a>注解作用</h3><ul>
<li><strong>标记作用</strong>   @Override 标记重写父类方法</li>
<li><strong>编译时动态处理，动态生成代码</strong>  @BindView(R.id.view) ButterKnife</li>
<li><strong>运行时动态处理，获取注解信息</strong>  @Post(“”) Retrofit </li>
</ul>
<h2 id="注解分类"><a href="#注解分类" class="headerlink" title="注解分类"></a>注解分类</h2><h3 id="元注解"><a href="#元注解" class="headerlink" title="元注解"></a>元注解</h3><blockquote>
<p>Android系统内置的注解类型，负责注解其他注解的注解类型</p>
</blockquote>
<p>以下介绍4个常用的元注解</p>
<h4 id="Retention"><a href="#Retention" class="headerlink" title="@Retention"></a>@Retention</h4><blockquote>
<p>保留注解。表示注解被保留的时间长短</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Annotation_Retention&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其中<code>RetentionPolicy</code>有三种类型，对应三种保留策略。</p>
<table>
<thead>
<tr>
<th>RetentionPolicy(安保留时长排序)</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>RetentionPolicy.SOURCE</td>
<td>注解只在源代码阶段保留，编译器编译时会被忽视</td>
</tr>
<tr>
<td>RetentionPolicy.CLASS(<strong>默认保留策略</strong>)</td>
<td>注解只保留在编译时<strong>编译时注解</strong></td>
</tr>
<tr>
<td>RetentionPolicy.RUNTIME</td>
<td>注解保留到程序运行时，并且会被加载到JVM中，程序运行时可以获取到他们<strong>运行时注解</strong></td>
</tr>
</tbody>
</table>
<h4 id="Documented"><a href="#Documented" class="headerlink" title="@Documented"></a>@Documented</h4><blockquote>
<p>Java文档注解。可以将注解的元素包含到文档中</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Annotation_Documented&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Target"><a href="#Target" class="headerlink" title="@Target"></a>@Target</h4><blockquote>
<p>表示该注解类型的适用程序元素类型。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Annotation_Target&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><em>如果未设置@Target类型，默认适用于所有8大元素。</em></p>
<p>其中<code>ElementType</code>有8种类型，对应8种限制范围。</p>
<table>
<thead>
<tr>
<th>ElementType</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>ANNOTATION_TYPE</td>
<td>注解类型声明</td>
</tr>
<tr>
<td>CONSTRUCTOR</td>
<td>构造方法声明</td>
</tr>
<tr>
<td>FIELD</td>
<td>字段声明</td>
</tr>
<tr>
<td>LOCAL_VARIABLE</td>
<td>局部变量声明</td>
</tr>
<tr>
<td>METHOD</td>
<td>方法声明</td>
</tr>
<tr>
<td>PACKAGE</td>
<td>包声明</td>
</tr>
<tr>
<td>PARAMETER</td>
<td>参数声明</td>
</tr>
<tr>
<td>TYPE</td>
<td>类、接口、枚举声明</td>
</tr>
</tbody>
</table>
<h4 id="Inherited"><a href="#Inherited" class="headerlink" title="@Inherited"></a>@Inherited</h4><blockquote>
<p>继承注解。如果某个类使用了<code>@Inherited</code>修饰的注解，那么其子类也继承该注解。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Annotation_Inherited&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Java 8之后新增的元注解</p>
<h4 id="Repeatable"><a href="#Repeatable" class="headerlink" title="@Repeatable"></a>@Repeatable</h4><blockquote>
<p>可重复注解，被注解的对象可以取多个值。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//容器注解 用于存放其他注解对象</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Job &#123;</span><br><span class="line">    Person[] value();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Repeatable</span>(Job.class)</span><br><span class="line">pulic <span class="meta">@interface</span> Person &#123;</span><br><span class="line">    <span class="function">String <span class="title">role</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Person</span>(role=<span class="string">"1"</span>)</span><br><span class="line"><span class="meta">@Person</span>(role=<span class="string">"2"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span>()</span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Java内置注解"><a href="#Java内置注解" class="headerlink" title="Java内置注解"></a>Java内置注解</h3><blockquote>
<p> Java内部已经实现好的注解类型</p>
</blockquote>
<h4 id="Override"><a href="#Override" class="headerlink" title="@Override"></a>@Override</h4><blockquote>
<p>用于告知编译器，该方法需要被覆写。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Deprecated"><a href="#Deprecated" class="headerlink" title="@Deprecated"></a>@Deprecated</h4><blockquote>
<p>标记对象已经过时，不建议使用。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">  <span class="meta">@Deprecated</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Test test = <span class="keyword">new</span> Test();</span><br></pre></td></tr></table></figure>
<p>最终显示：test.<del>test()</del>;</p>
<h4 id="SuppressWarnings"><a href="#SuppressWarnings" class="headerlink" title="@SuppressWarnings"></a>@SuppressWarnings</h4><blockquote>
<p>阻止警告注解，被该注解标记时，不会显示<code>warning</code></p>
</blockquote>
<h4 id="FunctionalInterface"><a href="#FunctionalInterface" class="headerlink" title="@FunctionalInterface"></a>@FunctionalInterface</h4><blockquote>
<p>Java8后引入，标记该对象可以实现函数式接口。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FunctionalInterface</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h3><blockquote>
<p>由开发者自己实现注解功能，依赖上面系统提供的注解类型</p>
</blockquote>
<h4 id="运行时注解"><a href="#运行时注解" class="headerlink" title="运行时注解"></a>运行时注解</h4><blockquote>
<p>在代码中通过注解进行标记，在运行时通过反射寻找标价进行处理。<strong>由于反射导致运行低效。</strong></p>
</blockquote>
<h5 id="定义注解"><a href="#定义注解" class="headerlink" title="定义注解"></a>定义注解</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义 运行时注解</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="comment">//支持修饰的是 类、方法、接口等    变量                  方法</span></span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE, ElementType.FIELD, ElementType.METHOD&#125;)</span><br><span class="line"><span class="meta">@interface</span> CustomAnnotation &#123;</span><br><span class="line">    <span class="comment">//定义注解支持的类型</span></span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="注解解析"><a href="#注解解析" class="headerlink" title="注解解析"></a>注解解析</h5><p>主要要使用到以下的方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>T   getAnnotation(Class annotationClass)</td>
<td>存在<code>annotationClass</code>对应的注解时，返回对应的注解对象</td>
</tr>
<tr>
<td>Annotation[]   getAnnotations()</td>
<td>返回该元素上的所有注解，包括继承于基类的注解</td>
</tr>
<tr>
<td>Annotation[]   getDeclaredAnnotations()</td>
<td>返回自身显式标明的所有注解</td>
</tr>
<tr>
<td>boolean isAnnotationPresent(Class&lt;? extends Annotation&gt; annotationClass)</td>
<td>存在<code>annotationClass</code>对应的注解时，返回true</td>
</tr>
</tbody>
</table>
<p>不同位置的注解需要使用不同的解析方式，主要分为3种：</p>
<h6 id="获取类的注解信息"><a href="#获取类的注解信息" class="headerlink" title="获取类的注解信息"></a>获取类的注解信息</h6><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomAnnotation</span>(value = <span class="string">"AnnotationClass"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAnnotationClass</span><span class="params">(Class clazz)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">boolean</span> hasAnnotation = clazz.isAnnotationPresent(CustomAnnotation.class);</span><br><span class="line">       <span class="keyword">if</span> (hasAnnotation) &#123;</span><br><span class="line">           CustomAnnotation contentView = clazz.getAnnotation(CustomAnnotation.class);</span><br><span class="line">           System.err.println(<span class="string">"Class "</span> + contentView.value());</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h6 id="获取方法的注解信息"><a href="#获取方法的注解信息" class="headerlink" title="获取方法的注解信息"></a>获取方法的注解信息</h6><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomAnnotation</span>(value = <span class="string">"AnnotationMethod"</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解析代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAnnotationMethod</span><span class="params">(Class clazz, String methodName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//利用反射获取clazz中的对应方法</span></span><br><span class="line">            Method method = clazz.getDeclaredMethod(methodName);</span><br><span class="line">            <span class="keyword">if</span> (method != <span class="keyword">null</span>) &#123;</span><br><span class="line">                <span class="comment">//允许访问私有方法</span></span><br><span class="line">                method.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">                <span class="comment">//获取所有注解类</span></span><br><span class="line">                Annotation[] ans = method.getDeclaredAnnotations();</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.length; i++) &#123;</span><br><span class="line">                    <span class="comment">//存在相同类名的注解类</span></span><br><span class="line">                    <span class="keyword">if</span> (ans[i].annotationType() == CustomAnnotation.class) &#123;</span><br><span class="line">                        CustomAnnotation contentView = method.getAnnotation(CustomAnnotation.class);</span><br><span class="line">                        System.err.println(<span class="string">"Method "</span> + contentView.value());</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h6 id="获取变量的注解信息"><a href="#获取变量的注解信息" class="headerlink" title="获取变量的注解信息"></a>获取变量的注解信息</h6><p>示例代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CustomAnnotation</span>(value = <span class="string">"AnnotationVar"</span>)</span><br><span class="line"><span class="keyword">int</span> annotationVar = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<p>解析代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getAnnotationVar</span><span class="params">(Class clazz, String varName)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//根据变量名获取 变量</span></span><br><span class="line">        Field field = clazz.getDeclaredField(varName);</span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//获取对应注解类</span></span><br><span class="line">        CustomAnnotation contentView = field.getAnnotation(CustomAnnotation.class);</span><br><span class="line">        <span class="keyword">if</span> (contentView != <span class="keyword">null</span>) &#123;</span><br><span class="line">            System.err.println(<span class="string">"Field "</span> + contentView.value());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编译时注解"><a href="#编译时注解" class="headerlink" title="编译时注解"></a>编译时注解</h4><blockquote>
<p>不会对性能产生任何影响，实质就是<strong>生成代码</strong>，在编译时对注解做处理，通过注解获取必要信息，在项目中生成代码，于运行时调用。</p>
</blockquote>
<h5 id="定义注解-1"><a href="#定义注解-1" class="headerlink" title="定义注解"></a>定义注解</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.CLASS)</span><br><span class="line"><span class="meta">@Target</span>(&#123;ElementType.TYPE,ElementType.METHOD&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">value</span><span class="params">()</span> <span class="keyword">default</span> 0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="注解解析-1"><a href="#注解解析-1" class="headerlink" title="注解解析"></a>注解解析</h5><p>关键点在于注解的解析器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SupportedAnnotationTypes</span>(<span class="string">"com.wxy.route.test.MyAnnotation"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyAnnotationProcessor</span> <span class="keyword">extends</span> <span class="title">AbstractProcessor</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">process</span><span class="params">(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//在其中执行 解析注解</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="内容引用"><a href="#内容引用" class="headerlink" title="内容引用"></a>内容引用</h2><p><a href="https://www.jianshu.com/p/5c8d183533fb" target="_blank" rel="noopener">注解生成Java代码</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Leo-Wxy</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://leo-wxy.github.io/2019/02/19/Java-注解/">https://leo-wxy.github.io/2019/02/19/Java-注解/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://leo-wxy.github.io">Wxy的个人博客</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Java/">Java</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2019/02/21/JVM相关及其拓展-八/"><i class="fa fa-chevron-left">  </i><span>JVM相关及其拓展(八) — 静态分派&amp;动态分派</span></a></div><div class="next-post pull-right"><a href="/2019/02/15/Lifecycle简析/"><span>Lifecycle简析</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2020 By Leo-Wxy</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>