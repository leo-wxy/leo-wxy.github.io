

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#11527b">
  <meta name="description" content="如果我没有见过光明，那我本可以忍受黑暗">
  <meta name="author" content="Leo-Wxy">
  <meta name="keywords" content="">
  <title>WebView相关知识 - Wxy的个人博客</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">


  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css">
  <link rel="stylesheet" href="/lib/hint/hint.min.css">

  
    
    
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/atom-one-light.min.css">
    
  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  



<!-- 主题依赖的图标库，不要自行修改 -->
<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">

<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">

<link rel="stylesheet" href="/css/main.css">

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"leo-wxy.github.io","root":"/","version":"1.8.7","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null},"tajs":null}};
  </script>
  <script src="/js/utils.js"></script>
  <script src="/js/color-schema.js"></script>
</head>


<body>
  <header style="height: 40vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Wxy's Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="WebView相关知识">
              
                WebView相关知识
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-03-12 10:45" pubdate>
        2019年3月12日 上午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      2.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      33
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">WebView相关知识</h1>
            
            <div class="markdown-body">
              <!--webview-->
<blockquote>
<p>WebView是一个基于WebKit引擎，展现Web页面的控件。</p>
<p>主要提供以下功能：</p>
<ul>
<li>显示和渲染Web页面</li>
<li>直接使用html文件做布局</li>
<li>可以和js进行交互</li>
</ul>
</blockquote>
<h2 id="WebView基本使用"><a href="#WebView基本使用" class="headerlink" title="WebView基本使用"></a>WebView基本使用</h2><h3 id="添加权限"><a href="#添加权限" class="headerlink" title="添加权限"></a>添加权限</h3><figure class="highlight xml"><figcaption><span>AndroidManifest.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;uses-permission android:name="android.permission.INTERNET"/&gt;<br></code></pre></td></tr></table></figure>
<h3 id="生成一个WebView组件"><a href="#生成一个WebView组件" class="headerlink" title="生成一个WebView组件"></a>生成一个WebView组件</h3><p>直接引入</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">WebView webView = new WebView(<span class="hljs-keyword">this</span>);<br></code></pre></td></tr></table></figure>
<p>写在xml中引入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml">&lt;WebView<br>    android:id="@+id/wv"<br>    android:width="match_parent"<br>    android:height = "match_parent"<br>      /&gt;<br><br>WebView webview = (WebView) findViewById(R.id.wv);<br></code></pre></td></tr></table></figure>
<h3 id="设置WebView基本信息"><a href="#设置WebView基本信息" class="headerlink" title="设置WebView基本信息"></a>设置WebView基本信息</h3><p>主要利用<code>WebSetting、WebViewClient，WebChromeClient</code></p>
<h4 id="WebSetting"><a href="#WebSetting" class="headerlink" title="WebSetting"></a><code>WebSetting</code></h4><blockquote>
<p>进行基本属性配置</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java">//声明WebSettings子类<br>WebSettings webSettings = webView.getSettings();<br><br>//如果访问的页面中要与Javascript交互，则webview必须设置支持Javascript<br>webSettings.setJavaScriptEnabled(<span class="hljs-keyword">true</span>);  <br><br>//支持插件<br>webSettings.setPluginsEnabled(<span class="hljs-keyword">true</span>); <br><br>//设置自适应屏幕，两者合用<br>webSettings.setUseWideViewPort(<span class="hljs-keyword">true</span>); //将图片调整到适合webview的大小 <br>webSettings.setLoadWithOverviewMode(<span class="hljs-keyword">true</span>); // 缩放至屏幕的大小<br><br>//缩放操作<br>webSettings.setSupportZoom(<span class="hljs-keyword">true</span>); //支持缩放，默认为<span class="hljs-keyword">true</span>。是下面那个的前提。<br>webSettings.setBuiltInZoomControls(<span class="hljs-keyword">true</span>); //设置内置的缩放控件。若为<span class="hljs-keyword">false</span>，则该WebView不可缩放<br>webSettings.setDisplayZoomControls(<span class="hljs-keyword">false</span>); //隐藏原生的缩放控件<br><br>//其他细节操作<br>webSettings.setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); //关闭webview中缓存 <br>webSettings.setAllowFileAccess(<span class="hljs-keyword">true</span>); //设置可以访问文件 <br>webSettings.setJavaScriptCanOpenWindowsAutomatically(<span class="hljs-keyword">true</span>); //支持通过JS打开新窗口 <br>webSettings.setLoadsImagesAutomatically(<span class="hljs-keyword">true</span>); //支持自动加载图片<br>webSettings.setDefaultTextEncodingName("utf-8");//设置编码格式<br></code></pre></td></tr></table></figure>
<h4 id="WebViewClient"><a href="#WebViewClient" class="headerlink" title="WebViewClient"></a><code>WebViewClient</code></h4><blockquote>
<p>处理各种通知以及请求事件</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java">webView.setWebViewClient(new WebViewClient()&#123;<br>      @Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> shouldOverrideUrlLoading(WebView view, String url) &#123;①<br>          view.loadUrl(url);<br>          return <span class="hljs-keyword">true</span>;<br>      &#125;<br>  <br>      @Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span>  onPageStarted(WebView view, String url, Bitmap favicon) &#123;②<br>         <br>      &#125;<br>  <br>      @Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onPageFinished(WebView view, String url) &#123;③<br>         <br>      &#125;<br>  <br>      @Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> onLoadResource(WebView view, String url) &#123;④<br>         <br>      &#125;<br>  <br>  		@Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceivedError(WebView view, <span class="hljs-keyword">int</span> errorCode, String description, String failingUrl)&#123;⑤<br>					//errorCode表示了 加载错误对应的错误码<br>      &#125;<br>  <br>  		@Override    <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123;⑥<br><br>       &#125;    <br>  &#125;);<br></code></pre></td></tr></table></figure>
<h5 id="shouldOverrideUrlLoading"><a href="#shouldOverrideUrlLoading" class="headerlink" title="shouldOverrideUrlLoading"></a><code>shouldOverrideUrlLoading</code></h5><blockquote>
<p>复写该方法，避免打开外部浏览器</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> shouldOverrideUrlLoading(WebView view, String url) &#123;①<br>          view.loadUrl(url);<br>          return <span class="hljs-keyword">true</span>;<br>      &#125;<br></code></pre></td></tr></table></figure>
<h5 id="onPageStarted"><a href="#onPageStarted" class="headerlink" title="onPageStarted"></a><code>onPageStarted</code></h5><blockquote>
<p>开始载入页面时回调该方法</p>
</blockquote>
<h5 id="onPageFinished"><a href="#onPageFinished" class="headerlink" title="onPageFinished"></a><code>onPageFinished</code></h5><blockquote>
<p>页面载入结束时回调该方法</p>
</blockquote>
<h5 id="onLoadResource"><a href="#onLoadResource" class="headerlink" title="onLoadResource"></a><code>onLoadResource</code></h5><blockquote>
<p>页面资源开始加载时调用，并且每次加载时都会调用</p>
</blockquote>
<h5 id="onReceivedError"><a href="#onReceivedError" class="headerlink" title="onReceivedError"></a><code>onReceivedError</code></h5><blockquote>
<p>加载页面出现错误时回调，可用于显示不同错误码的展示页面</p>
</blockquote>
<h5 id="onReceivedSslError"><a href="#onReceivedSslError" class="headerlink" title="onReceivedSslError"></a><code>onReceivedSslError</code></h5><blockquote>
<p>WebView默认是不处理HTTPs请求的，页面会显示空白</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override    <br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) &#123;    <br>      handler.proceed();    //表示等待证书响应<br>   // handler.cancel();      //表示挂起连接，为默认方式<br>   // handler.handleMessage(<span class="hljs-keyword">null</span>);    //可做其他处理<br>  &#125;<br></code></pre></td></tr></table></figure>
<h4 id="WebChromeClient"><a href="#WebChromeClient" class="headerlink" title="WebChromeClient"></a><code>WebChromeClient</code></h4><blockquote>
<p>辅助WebView处理js、网站标题等属性</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">webview.setWebChromeClient(new WebChromeClient()&#123;<br><br>      @Override<br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onProgressChanged(WebView view, <span class="hljs-keyword">int</span> newProgress) &#123;①<br>           //newProgress 当前加载进度<br>      &#125;);<br>  <br>   		@Override<br>    	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceivedTitle(WebView view, String title) &#123;②<br>       	  //title 当前页面标题<br>    	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h5 id="onProgressChanged"><a href="#onProgressChanged" class="headerlink" title="onProgressChanged"></a><code>onProgressChanged</code></h5><blockquote>
<p>获得当前页面的加载进度</p>
</blockquote>
<h5 id="onReceivedTitle"><a href="#onReceivedTitle" class="headerlink" title="onReceivedTitle"></a><code>onReceivedTitle</code></h5><blockquote>
<p>获得当前页面的标题</p>
</blockquote>
<h3 id="设置WebView要显示的网页"><a href="#设置WebView要显示的网页" class="headerlink" title="设置WebView要显示的网页"></a>设置WebView要显示的网页</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">//load本地<br>webView.loadUrl("file:///android_asset/hellotest.html");<br>//load在线<br>webView.loadUrl("http://www.google.com");<br></code></pre></td></tr></table></figure>
<h3 id="结束时销毁WebView"><a href="#结束时销毁WebView" class="headerlink" title="结束时销毁WebView"></a>结束时销毁WebView</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override<br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> onDestroy() &#123;<br>        <span class="hljs-keyword">if</span> (webView != <span class="hljs-keyword">null</span>) &#123;<br>            webView.loadDataWithBaseURL(<span class="hljs-keyword">null</span>, "", "text/html", "utf-8", <span class="hljs-keyword">null</span>);<br>            webView.clearHistory();<br><br>            ((ViewGroup) webView.getParent()).removeView(webView);<br>            webView.destroy();<br>            webView = <span class="hljs-keyword">null</span>;<br>        &#125;<br>        <span class="hljs-keyword">super</span>.onDestroy();<br>    &#125;<br></code></pre></td></tr></table></figure>
<h3 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a>拓展</h3><p>前进/后退网页</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> onKeyDown(<span class="hljs-keyword">int</span> keyCode, KeyEvent event) &#123;  <br>  <span class="hljs-keyword">if</span> (keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; webView.canGoBack()) &#123;    <br>     webView.goBack();// 返回前一个页面   <br>     return <span class="hljs-keyword">true</span>;   <br> 	&#125;    <br>		return <span class="hljs-keyword">super</span>.onKeyDown(keyCode, event);<br>&#125;<br>..................................<br>//是否可以前进                     <br>Webview.canGoForward()<br>//前进网页<br>Webview.goForward()<br></code></pre></td></tr></table></figure>
<h2 id="Android与Js的交互"><a href="#Android与Js的交互" class="headerlink" title="Android与Js的交互"></a>Android与Js的交互</h2><blockquote>
<p> Android与JS间的交互唯一桥梁就是<code>WebView</code>。</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>   &lt;head&gt;<br>      &lt;meta charset="utf-8"&gt;<br>      &lt;title&gt;WebView Test&lt;/title&gt;  <br>      &lt;script&gt;<br>         //用于调用Android中方法<br>         function callAndroid()&#123;<br>            myObj.hello("js调用了android中的hello方法");<br>         &#125;<br>         //用于测试第二种调用方法 <br>         function callAndroidWithLoadUrl()&#123;<br>           document.location="js://showMsg?msg=android"<br>         &#125;<br>         //用于调用js方法<br>         function callJS()&#123;<br>      			alert("Android调用了JS的callJS方法");<br>   			 &#125;<br>         function callJsWithParams(params)&#123;<br>            alert("Android调用了JS的callJsWithParams方法" + params); <br>         &#125;<br>         function callJsWithParamsAndResult(params)&#123;<br>            alert("Android调用了JS的callJsWithParamsAndResult" + params);<br>            return "Success";<br>         &#125;<br>      &lt;/script&gt;<br>   &lt;/head&gt;<br>   &lt;body&gt;<br>      &lt;button type="button" id="button1" onclick="callAndroid()"&gt;&lt;/button&gt;<br>   &lt;/body&gt;<br>&lt;/html&gt;<br></code></pre></td></tr></table></figure>
<h3 id="Android调用JS"><a href="#Android调用JS" class="headerlink" title="Android调用JS"></a>Android调用JS</h3><h4 id="通过WebView-loadUrl-调用"><a href="#通过WebView-loadUrl-调用" class="headerlink" title="通过WebView.loadUrl()调用"></a>通过<code>WebView.loadUrl()</code>调用</h4><blockquote>
<p><strong>Js的调用一定要在<code>onPageFinished()</code>回调之后才可调用，否则会导致失败。</strong></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">webView.loadUrl("javascript:callJS()");<br><br>webView.loadUrl("javascript:callJsWithParams("+params+")")<br></code></pre></td></tr></table></figure>
<p>在4.4之前并没有直接提供调用js函数并获取返回值的方法，需要操作的是 <strong>Android调用Js，Js执行完毕后，再通过Js继续调用Android方法返回值。</strong></p>
<h4 id="通过WebView-evaluateJavascript-调用-4-4后新增"><a href="#通过WebView-evaluateJavascript-调用-4-4后新增" class="headerlink" title="通过WebView.evaluateJavascript()调用(4.4后新增)"></a>通过<code>WebView.evaluateJavascript()</code>调用(4.4后新增)</h4><blockquote>
<p>该方法效率高于<code>loadUrl()</code>，不会导致页面的刷新。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">mWebView.evaluateJavascript（"javascript:callJsWithParamsAndResult("+params+")", new ValueCallback&lt;String&gt;() &#123;<br>        @Override<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceiveValue(String value) &#123;<br>            // value 为 Success<br>        &#125;<br>    &#125;);<br></code></pre></td></tr></table></figure>
<p>在具体使用时，可以将两者进行结合使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">// Android版本变量<br><span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> version = Build.VERSION.SDK_INT;<br>// 因为该方法在 Android 4.4 版本才可使用，所以使用时需进行版本判断<br><span class="hljs-keyword">if</span> (version &lt; 18) &#123;<br>    mWebView.loadUrl("javascript:callJS()");<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    mWebView.evaluateJavascript（"javascript:callJS()", new ValueCallback&lt;String&gt;() &#123;<br>        @Override<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onReceiveValue(String value) &#123;<br>            <br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="JS调用Android"><a href="#JS调用Android" class="headerlink" title="JS调用Android"></a>JS调用Android</h3><h4 id="通过WebView-addJavascriptInterface-进行对象映射"><a href="#通过WebView-addJavascriptInterface-进行对象映射" class="headerlink" title="通过WebView.addJavascriptInterface()进行对象映射"></a>通过<code>WebView.addJavascriptInterface()</code>进行对象映射</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> class MyObject extends Object&#123;<br>  @JavascriptInterface<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> hello(String msg)&#123;<br>    <br>  &#125;<br>&#125;<br>//将Java对象映射到Js上<br>webView.addJavascriptInterface(new MyObject(), "myObj");<br></code></pre></td></tr></table></figure>
<p><strong>该方法在4.2以下存在严重的安全漏洞问题，下一节中会有相关的解决方法。</strong></p>
<h4 id="利用WebViewClient-shouldOverrideUrlLoading-拦截url"><a href="#利用WebViewClient-shouldOverrideUrlLoading-拦截url" class="headerlink" title="利用WebViewClient.shouldOverrideUrlLoading()拦截url"></a>利用<code>WebViewClient.shouldOverrideUrlLoading()</code>拦截url</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java">mWebView.setWebViewClient(new WebViewClient() &#123;<br>                                      @Override<br>                                      <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> shouldOverrideUrlLoading(WebView view, String url) &#123;<br><br>                                          // 步骤2：根据协议的参数，判断是否是所需要的url<br>                                          // 一般根据scheme（协议格式） &amp; authority（协议名）判断（前两个参数）<br>                                          //假定传入进来的 url = "js://webview?arg1=111&amp;arg2=222"（同时也是约定好的需要拦截的）<br><br>                                          Uri uri = Uri.parse(url);                                 <br>                                          // 如果url的协议 = 预先约定的 js 协议<br>                                          // 就解析往下解析参数<br>                                          <span class="hljs-keyword">if</span> ( uri.getScheme().equals("js")) &#123;<br><br>                                              // 如果 authority  = 预先约定协议里的 webview，即代表都符合约定的协议<br>                                              // 所以拦截url,下面JS开始调用Android需要的方法<br>                                              <span class="hljs-keyword">if</span> (uri.getAuthority().equals("webview")) &#123;<br><br>                                                 //  步骤3：<br>                                                  // 执行JS所需要调用的逻辑<br>                                                  System.out.println("js调用了Android的方法");<br>                                                  // 可以在协议上带有参数并传递到Android上<br>                                                  HashMap&lt;String, String&gt; params = new HashMap&lt;&gt;();<br>                                                  Set&lt;String&gt; collection = uri.getQueryParameterNames();<br><br>                                              &#125;<br><br>                                              return <span class="hljs-keyword">true</span>;<br>                                          &#125;<br>                                          return <span class="hljs-keyword">super</span>.shouldOverrideUrlLoading(view, url);<br>                                      &#125;<br>                                  &#125;<br>        );<br>   &#125;<br></code></pre></td></tr></table></figure>
<h4 id="利用WebChromeClient回调接口的三个方法拦截消息"><a href="#利用WebChromeClient回调接口的三个方法拦截消息" class="headerlink" title="利用WebChromeClient回调接口的三个方法拦截消息"></a>利用<code>WebChromeClient</code>回调接口的三个方法拦截消息</h4><blockquote>
<p>对相关的接口进行拦截，这里拦截的是 Js中的几个提示方法，也就是几种样式的对话框。</p>
</blockquote>
<table>
<thead>
<tr>
<th>Js中方法</th>
<th>作用</th>
<th>返回值</th>
<th>对应拦截方法</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>alert()</code></td>
<td>弹出警告框</td>
<td>没有</td>
<td><code>onJsAlert()</code></td>
</tr>
<tr>
<td><code>confirm()</code></td>
<td>弹出确认框</td>
<td>true/false</td>
<td><code>onJsConfirm()</code></td>
</tr>
<tr>
<td><code>prompt()</code></td>
<td>弹出输入框</td>
<td>任意设置返回值<em>输入内容</em></td>
<td><code>onJsPrompt()</code></td>
</tr>
</tbody>
</table>
<p>只有在<code>onJsPrompt()</code>中可以返回任意字段，可以在其中进行拦截判断，以调用对应方法。</p>
<h2 id="WebView执行漏洞"><a href="#WebView执行漏洞" class="headerlink" title="WebView执行漏洞"></a>WebView执行漏洞</h2><h3 id="任意代码执行漏洞"><a href="#任意代码执行漏洞" class="headerlink" title="任意代码执行漏洞"></a>任意代码执行漏洞</h3><h4 id="WebView中的addJavascriptInterface-接口"><a href="#WebView中的addJavascriptInterface-接口" class="headerlink" title="WebView中的addJavascriptInterface()接口"></a>WebView中的<code>addJavascriptInterface()</code>接口</h4><blockquote>
<p>当Js获取到这个对象后，就可以调用到该对象的所有方法，导致漏洞产生。</p>
</blockquote>
<h4 id="WebView内置导出的searchBoxJavaBridge-对象"><a href="#WebView内置导出的searchBoxJavaBridge-对象" class="headerlink" title="WebView内置导出的searchBoxJavaBridge_对象"></a>WebView内置导出的<code>searchBoxJavaBridge_</code>对象</h4><blockquote>
<p>Android3.0以下 系统默认通过<code>searchBoxJavaBridge_</code>给WebView添加一个Js映射对象：<code>searchBoxJavaBridge_</code>对象</p>
</blockquote>
<h4 id="WebView内置导出的accessibility和accessibilityTraversal对象"><a href="#WebView内置导出的accessibility和accessibilityTraversal对象" class="headerlink" title="WebView内置导出的accessibility和accessibilityTraversal对象"></a>WebView内置导出的<code>accessibility</code>和<code>accessibilityTraversal</code>对象</h4><h3 id="密码明文存储漏洞"><a href="#密码明文存储漏洞" class="headerlink" title="密码明文存储漏洞"></a>密码明文存储漏洞</h3><p>当WebView开启密码保存功能时导致漏洞<code>webView.setSavePassword(true)</code>，密码会被明文保存到<code>/data/data/com.package.name/databases/webview.db</code>中，有泄漏危险。</p>
<p>通过设置<code>webView.setSavePassword(false)</code>关闭密码保存提醒功能。</p>
<h3 id="域控制不严格漏洞"><a href="#域控制不严格漏洞" class="headerlink" title="域控制不严格漏洞"></a>域控制不严格漏洞</h3><p>A应用可以通过B应用导出的Activity让B应用家在一个恶意的file协议的url，从而获取到B应用的内部私有文件，带来数据泄露威胁。</p>
<p>对于不需要使用 file 协议的应用，禁用 file 协议；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java">// 禁用 file 协议；<br>setAllowFileAccess(<span class="hljs-keyword">false</span>); <br>setAllowFileAccessFromFileURLs(<span class="hljs-keyword">false</span>);<br>setAllowUniversalAccessFromFileURLs(<span class="hljs-keyword">false</span>);<br></code></pre></td></tr></table></figure>
<p>对于需要使用 file 协议的应用，禁止 file 协议加载 JavaScript。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">// 需要使用 file 协议<br>setAllowFileAccess(<span class="hljs-keyword">true</span>); <br>setAllowFileAccessFromFileURLs(<span class="hljs-keyword">false</span>);<br>setAllowUniversalAccessFromFileURLs(<span class="hljs-keyword">false</span>);<br><br>// 禁止 file 协议加载 JavaScript<br><span class="hljs-keyword">if</span> (url.startsWith("file://") &#123;<br>    setJavaScriptEnabled(<span class="hljs-keyword">false</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>    setJavaScriptEnabled(<span class="hljs-keyword">true</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="WebView优化"><a href="#WebView优化" class="headerlink" title="WebView优化"></a>WebView优化</h2><h3 id="WebView内存泄漏"><a href="#WebView内存泄漏" class="headerlink" title="WebView内存泄漏"></a>WebView内存泄漏</h3><p><strong>最好是可以去开启一个单独的进程去使用WebView并且当这个进程结束时，手动调用<code>System.exit(0)</code></strong>。</p>
<h3 id="后台无法释放js导致耗电"><a href="#后台无法释放js导致耗电" class="headerlink" title="后台无法释放js导致耗电"></a>后台无法释放js导致耗电</h3><p>在Js中可能会有一些动画或音频播放会一直执行，即时WebView挂在后台，这些资源也会继续使用，导致耗电加快。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onResume()&#123;<br>  <span class="hljs-keyword">super</span>.onResume();<br>  webView.setJavascriptEnabled(<span class="hljs-keyword">true</span>);<br>&#125;<br><br>@Override<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onStop()&#123;<br>  <span class="hljs-keyword">super</span>.onStop();<br>  webView.setJavascriptEnabled(<span class="hljs-keyword">false</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="setBuiltInZoomControls引起的Crash"><a href="#setBuiltInZoomControls引起的Crash" class="headerlink" title="setBuiltInZoomControls引起的Crash"></a><code>setBuiltInZoomControls</code>引起的Crash</h3><p>当调用<code>setsetBuiltInZoomControls(true)</code>时去触摸屏幕，然后显示一个缩放控制图标，这图标几秒后会自动消失，这时去主动退出Activity，就会发生<code>ZoomButton</code>找不到依附Window导致异常使程序崩溃。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">@Override<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onDestroy()&#123;<br>  <span class="hljs-keyword">super</span>.onDestroy();<br>  //手动进行隐藏，就不会导致崩溃了<br>  webView.setVisibility(View.GONE);<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="底部空白"><a href="#底部空白" class="headerlink" title="底部空白"></a>底部空白</h3><p>当WebView嵌套在ScrollView里的时候，如果WebView先加载了一个高度很高的网页，再加载一个高度很低的网页，就会造成WebView的高度无法自适应，导致底部出现大量空白的情况。</p>
<p>通过JS注入的方式，获取页面内容的高度，获取到后赋值到WebView的高度上。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java">mWebView.setWebViewClient(new WebViewClient() &#123;<br>    @Override<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> onPageFinished(WebView view, String url) &#123;<br>        mWebView.loadUrl("javascript:App.resize(document.body.getBoundingClientRect().height)");<br>        <span class="hljs-keyword">super</span>.onPageFinished(view, url);<br>    &#125;<br>&#125;);<br>mWebView.addJavascriptInterface(<span class="hljs-keyword">this</span>, "App");<br><br><br>@JavascriptInterface<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> resize(<span class="hljs-keyword">final</span> <span class="hljs-keyword">float</span> height) &#123;<br>    getActivity().runOnUiThread(new Runnable() &#123;<br>        @Override<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> run() &#123;<br>            //Toast.makeText(getActivity(), height + "", Toast.LENGTH_LONG).show();<br>            //此处的 layoutParmas 需要根据父控件类型进行区分，这里为了简单就不这么做了<br>            <br>            mWebView.setLayoutParams(new LinearLayout.LayoutParams(getResources().getDisplayMetrics().widthPixels, (<span class="hljs-keyword">int</span>) (height * getResources().getDisplayMetrics().density)));<br>        &#125;<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="WebView独立进程"><a href="#WebView独立进程" class="headerlink" title="WebView独立进程"></a>WebView独立进程</h2><blockquote>
<p>WebView容易导致OOM问题，内存占用很大，还容易有内存泄漏的风险</p>
<p>由于Android版本的不同，4.0之前用的WebKit的内核，4.0之后就换了 chromium做内核了，内核的不同导致兼容性Crash</p>
<p>WebView和Native版本也不一致，导致Crash</p>
</blockquote>
<p>多进程的好处：</p>
<ul>
<li>Android每个应用的内存占用是有限制的，占用内存越大越容易被杀死。实现多进程时，可有效减少主进程内存占用</li>
<li>子进程的崩溃不会影响到主进程的使用</li>
<li>独立的进程的启动与退出不依赖于用户的使用，可以完全独立控制，主进程的退出不影响其使用</li>
</ul>
<p>//TODO 代码</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/Android/">Android</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0协议</a> 。转载请注明出处！</p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2019/03/14/博客导读/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">博客导读</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/03/08/OkHttp简析/">
                        <span class="hidden-mobile">OkHttp简析</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>








  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>









  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8.8.3/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>







<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>



</body>
</html>
