---
title: 设计模式--基本原则
date: 2018-12-14 10:01:55
tags: 设计模式
top: 10
---



{% fullimage /images/设计模式-基本原则.png,设计模式-基本原则,设计模式-基本原则%}

## 单一职责原则（SRP）

> 单一职责原则英文名称为`Single Responsibility Principle`,简称SRP。

优点：

- 类的复杂性降低，实现什么职责都有清晰明确的定义
- 可读性提高，复杂性降低
- 可维护性高

对于开发过程来说，**接口一定要做到单一职责，类的设计尽量做到只有一个原因引起变化**。

## 里氏替换原则（LSP）

> 所有引用父类的地方都必须能透明的使用其子类的对象。简单的说就是 **父类能出现的地方子类就可以出现。**

里氏替换原则为良好的继承定义了一个规范，主要包含了4个含义：

- **子类必须完全实现父类的方法**：`如果子类不能完整的实现父类的方法，或者父类方法在子类中已无法实现，建议断开父子继承关系，采用依赖、聚集，组合等方法代替继承。`
- **子类可以有自己的个性**：`里氏替换原则可以正着用，但不能反过来用。子类出现的地方，父类未必可以使用。`
- **覆盖或实现父类的方法时输入参数可以被放大**：`子类中的方法前置条件必须与父类中被覆写的方法的前置条件相同或者更宽松。`
- **覆写或实现父类的方法时输出结果可以被缩小**

在开发过程中尽量避免子类的”个性“，有了之后，与父类的关系就难调和。

## 依赖倒置原则（DIP）

> - 高层模块不应该依赖低层模块，两者都应该依赖其抽象
> - 抽象不应该依赖细节
> - 细节应该依赖于抽象
>
> **面向接口编程**

本质就是通过抽象（接口或者抽象类）使各个类或模块的实现彼此独立，不互相影响，实现模块间的送耦合。

## 接口隔离原则（ISP）

> 接口分为两种：实例接口 和 类接口
>
> 接口尽量细化，同时接口中的方法要尽量少。尽量使用多个专门的接口。

接口隔离原则是对接口进行规范约束，包含以下4层含义：

- 接口要尽量小 **不能违反单一职责原则**
- 接口要高内聚：`高内聚就是提高接口、类，模块的处理能力，减少对外的交互`
- 定制服务：**只提供访问者需要的方法，减少可能引起的风险**
- 接口设计是有限度的：`接口的设计粒度越小，系统越灵活，但是会增加结构复杂度以及开发难度`

在开发过程中可以按照如下规则设计：

- 一个接口只服务于一个子模块或业务逻辑
- 通过业务逻辑压缩接口中的public方法
- 已经被污染的接口尽量去修改
- 根据每个项目或产品去制定拆分标准

## 迪米特法则（LoD）--最少知识原则(LKP)

> 一个对象应该对其他对象有最少的了解

迪米特法则对类的低耦合提出了明确的要求，包含以下4个含义：

- 只和朋友交流：**在类的一个方法中尽量不引入一个类中不存在的对象**
- 朋友间也是有距离的：**尽量不对外公布太多的public方法和非静态的public变量，尽量内敛**
- 是自己的就是自己的：**如果一个方法放在本类中，既不增加类间关系，也不会对本类产生负面影响，就可以放置在本类中**
- 谨慎使用Serializable：**在进行传输对象时需要进行序列化，当修改了属性时，会导致反序列化失败**

迪米特法则核心观念就是**类间解耦，弱耦合**。

## 开闭原则（OCP）—最基础的原则

> 软件实体应该对扩展开放，对修改关闭。`一个软件实体应该通过扩展来实现变化，而不是去修改已有代码。`

**开闭原则并不意味着不做任何修改，低层模块的变更，必然要有高层模块进行耦合**

开闭原则的重要性：

- 减少测试工作量
- 提高复用性
- 提高可维护性
- 面向对象开发

