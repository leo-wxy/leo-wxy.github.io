---
title: Ruståˆè¯†
typora-root-url: ../
date: 2023-02-26 14:51:13
tags: Rust
mathjax: true
top: 10
---

> Rustâ€”â€”ä¸€é—¨èµ‹äºˆæ¯ä¸ªäººæ„å»ºå¯é ä¸”é«˜æ•ˆè½¯ä»¶èƒ½åŠ›çš„è¯­è¨€ã€‚
>
> **Rustç¼–è¯‘å™¨æ•™ä½ å†™ä»£ç ï¼**

## ä¸ºä»€ä¹ˆé€‰æ‹©Rustï¼Ÿ

- **é«˜æ€§èƒ½**ï¼šé€Ÿåº¦æƒŠäººä¸”å†…å­˜åˆ©ç”¨ç‡æé«˜
- **å¯é æ€§**ï¼šä¿è¯å†…å­˜å®‰å…¨å’Œçº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨ç¼–è¯‘æœŸæ¶ˆé™¤å„ç§å„æ ·çš„é”™è¯¯ã€‚
- **ç”Ÿäº§åŠ›**ï¼šå‡ºè‰²çš„æ–‡æ¡£ï¼Œå‹å¥½çš„ç¼–è¯‘å™¨å’Œæ¸…æ™°çš„é”™è¯¯æç¤ºä¿¡æ¯

## å®‰è£…Rust

ä»¥ä¸‹çš†ä»¥mac OSå¹³å°ä¸ºä¸»

```shell
# ä¸‹è½½è„šæœ¬å¹¶å®‰è£…rustupå·¥å…·
curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh

# æŸ¥çœ‹rustç‰ˆæœ¬
rustc --version
```

### Rustæ›´æ–°ä¸å¸è½½

```shell
# rustæ›´æ–°
rustup update

# rustå¸è½½
rustup self uninstall
```





### ä½¿ç”¨Cargo

> Cargoæ˜¯Rustçš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å™¨

#### Cargoåˆ›å»ºé¡¹ç›®

```shell
cargo new hello_cargo
```

#### Cargoæ„å»ºå¹¶è¿è¡Œé¡¹ç›®

```shell
//æ„å»º
cargo build 
//è¿è¡Œ
cargo run

//Releaseæ„å»º
cargo build --release 
```

## Rustç¼–ç¨‹æ¦‚å¿µ

> ä¸‹è¿°çš„ç¤ºä¾‹ä»£ç å‡åœ¨[IDEA](https://www.jetbrains.com/idea/)ä¸‹è¿›è¡Œç¼–è¯‘å¼€å‘ï¼Œéœ€è¦å®‰è£…[Rustæ’ä»¶](https://plugins.jetbrains.com/plugin/8182-rust)å³å¯ä½¿ç”¨ã€‚

### å˜é‡å’Œå¯å˜æ€§(`Variables`)

> å˜é‡é»˜è®¤æ˜¯**ä¸å¯æ”¹å˜(immutable)**çš„ã€‚
>
> å¯é€šè¿‡å˜é‡å‰æ·»åŠ `mut`ä½¿å˜é‡å¯å˜ã€‚

```rust
fn main(){
  let x = 5;
  x = 6 ;
} 

//ç¼–è¯‘æ—¶ç›´æ¥æŠ¥é”™ï¼Œå› ä¸ºxé»˜è®¤æ˜¯ä¸å¯å˜çš„
//è¦ä½¿ä»£ç ç”Ÿæ•ˆï¼Œéœ€è¦æ·»åŠ mut

fn main(){
  let mut x = 5;
  x = 6;
}

//ç¼–è¯‘æˆåŠŸ
```

#### å¸¸é‡(`Const`)

> å¸¸é‡åœ¨æ•´ä¸ªç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­éƒ½æœ‰æ•ˆï¼Œè€Œä¸”æ°¸ä¸å¯å˜ã€‚

```rust
const ONE_HOUR_IN_SECOND = 60 * 60;
```

#### éšè—(`Shadowing`)

> å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸ä¹‹å‰å˜é‡åŒåçš„æ–°å˜é‡ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªå˜é‡è¢«ç¬¬äºŒä¸ªå˜é‡**éšè—**äº†ï¼Œç¼–è¯‘å™¨åªä¼šçœ‹åˆ°ç¬¬äºŒä¸ªå˜é‡ã€‚

```rust
fn main(){
  let a = 100;
  println!("before a = {a}"); //è¾“å‡º100

    {
        let a = "sss";
        println!("a = {a}"); //è¾“å‡º sss

        let a = true;
        println!("a = {a}"); //è¾“å‡º true
    }

    println!("after a = {a}"); //è¾“å‡º100
}
```

ä¸Šè¿°ä»£ç ç®€å•ç¤ºä¾‹äº†`Scope`åŠ`Shadowing`ï¼Œæ­¤æ—¶è¿›å…¥`{}`ä¸­ï¼Œè¡¨ç¤ºæ–°å¼€äº†ä¸ªä½œç”¨åŸŸ(Scope)ï¼Œæ­¤æ—¶`a`çš„é€»è¾‘ä»…åœ¨`{}`æœ‰æ•ˆï¼Œåç»­å®šä¹‰çš„`let a = true;`è¡¨ç¤ºä¹‹å‰çš„`let a = sss`å·²è¢«éšè—ã€‚



### æ•°æ®ç±»å‹

> æ¯ä¸€ä¸ªå€¼éƒ½å±äº`æ•°æ®ç±»å‹`ï¼Œå¿…é¡»æ˜ç¡®æ¯ä¸ªå€¼çš„æ•°æ®ç±»å‹ï¼Œä¿è¯åŠŸèƒ½æ­£å¸¸ã€‚

#### æ ‡é‡ç±»å‹(Scalar Type)

> ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„å€¼ã€‚

##### æ•´å‹(`integers`)

> é»˜è®¤ä¸º`i32`

|                                                              | ç±»å‹                                  | ç¤ºä¾‹               |
| ------------------------------------------------------------ | ------------------------------------- | ------------------ |
| æœ‰ç¬¦å·æ•´å‹(ä»¥`i`å¼€å¤´)<br />å­˜å‚¨åŒ…å« **-(2^(n-1)) ~ 2^(n-1) -1** ä¹‹å†…çš„æ•°å­— | `i8`,`i16`,`i32`,`i64`,`i128`,`isize` | -10,0,1_000,123i64 |
| æ— ç¬¦å·æ•´å‹(ä»¥`u`å¼€å¤´)<br />å­˜å‚¨åŒ…å« **0 ~ 2^n -1** ä¹‹å†…çš„æ•°å­— | `u8`,`u16`,`u32`,`u64`,`u128`,`usize` | 0,123,10u16        |

å…¶ä¸­`isize`,`usize`ä¾èµ–è¿è¡Œç¨‹åºçš„è®¡ç®—æœºæ¶æ„ï¼š`64ä½æ¶æ„ä¸Šåˆ™ä¸º64ä½ï¼Œ32ä½æ¶æ„åˆ™ä¸º32ä½ã€‚`

> æ•´å‹æº¢å‡ºï¼šå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œæ— æ³•æ‰¿è½½æ‰€è®¾ç½®çš„å€¼ã€‚
>
> ç³»ç»Ÿé»˜è®¤å¤„ç†æ–¹å¼ï¼šæ¯”æ­¤ç±»å‹èƒ½å®¹çº³çš„æœ€å¤§å€¼è¿˜å¤§çš„å€¼ä¼šç»•åˆ°æœ€å°å€¼ï¼Œä¾‹å¦‚å®šä¹‰`u8`æœ€å¤§ä¸º256ï¼Œè®¾ç½®å€¼ä¸º`256`ï¼Œåˆ™è¾“å‡ºçš„å€¼ä¸º`0`ã€‚

```rust
let a:i32 = 100;
```



##### æµ®ç‚¹å‹(floating-point)

> é»˜è®¤ä¸º`f64`

|        | ç±»å‹        | ç¤ºä¾‹      |
| ------ | ----------- | --------- |
| æµ®ç‚¹å‹ | `f32`,`f64` | 3.14,2f32 |

å‚è€ƒ[è¿ç®—ç¬¦](https://kaisery.github.io/trpl-zh-cn/appendix-02-operators.html)å¯ä»¥ä½¿ç”¨æ‰€æœ‰æ•°å­—ç±»å‹è¿›è¡Œè¿ç®—ã€‚

```rust
let x:f32 = 2.0;
```



##### å¸ƒå°”å‹(bool)

|        | ç±»å‹   | ç¤ºä¾‹        |
| ------ | ------ | ----------- |
| å¸ƒå°”å‹ | `bool` | true ,false |

```rust
let x : bool = true;
```



##### å­—ç¬¦å‹(char)

|        | ç±»å‹   | ç¤ºä¾‹        |
| ------ | ------ | ----------- |
| å­—ç¬¦å‹ | `char` | 'a','â„¤','ğŸ˜»' |

ä½¿ç”¨`''`å£°æ˜`char`å­—é¢é‡ã€‚

```rust
let x:char = 'z';
```



##### å­—ç¬¦ä¸²ç±»å‹(String)

|          | ç±»å‹   | ç¤ºä¾‹  |
| -------- | ------ | ----- |
| å­—ç¬¦ä¸²å‹ | `&str` | "wxy" |

```rust
let x: &str = "Hello World";
```

#### å¤åˆç±»å‹(Compound Type)

> å°†å¤šä¸ªå€¼ç»„åˆæˆä¸€ä¸ªç±»å‹

##### å…ƒç»„ç±»å‹(tuple)

> å°†å¤šä¸ªå…¶ä»–ç±»å‹çš„å€¼ç»„åˆè¿›ä¸€ä¸ªå¤åˆç±»å‹çš„ä¸»è¦æ–¹å¼ã€‚
>
> **å…ƒç»„é•¿åº¦å›ºå®šï¼Œä¸€æ—¦å£°æ˜ï¼Œé•¿åº¦ä¸ä¼šå¢å¤§æˆ–ç¼©å°ã€‚**

|          | ç±»å‹                                                         | ç¤ºä¾‹                |
| -------- | ------------------------------------------------------------ | ------------------- |
| å…ƒç»„ç±»å‹ | `()`,`(T)`,`(T1,T2)`<br />å…¶ä¸­Tè¡¨ç¤ºå…·ä½“æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚`(i32, f64, u8)` | (123),(500, 6.4, 1) |

ä½¿ç”¨åŒ…å«åœ¨`()`ä¸­çš„`,`åˆ†å‰²çš„å€¼åˆ—è¡¨æ¥åˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼Œæ¯ä¸€ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»å‹ã€‚

```rust
fn main(){
  let t: (i8, bool, &str) = (7, true, "hello");
  
  let (x,y,z) = t; //æ­¤æ—¶x å¯¹åº” 7
  
  //ä¹Ÿå¯é€šè¿‡ t.0 è¾“å‡º 7 
  let a = t.0 //æ­¤æ—¶aä¸º7
}
```

> å•å…ƒå…ƒç»„`()`ï¼šä¸å¸¦ä»»ä½•å€¼çš„å…ƒç»„ï¼Œè¡¨ç¤ºç©ºå€¼æˆ–ç©ºçš„è¿”å›ç±»å‹ã€‚
> **å¯ç±»æ¯”Javaä¸­çš„`void`**



##### æ•°ç»„ç±»å‹(array)

> æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç±»å‹å¿…é¡»ç›¸åŒã€‚
>
> **æ•°ç»„é•¿åº¦æ˜¯å›ºå®šçš„ã€‚**

|          | ç±»å‹                                                         | ç¤ºä¾‹              |
| -------- | ------------------------------------------------------------ | ----------------- |
| æ•°ç»„ç±»å‹ | `[T;N]`<br />å…¶ä¸­Tè¡¨ç¤ºå…·ä½“æ•°æ®ç±»å‹ï¼ŒNè¡¨ç¤ºæ•°ç»„ä¸ªæ•°ï¼Œä¾‹å¦‚`(i32;5)` | [0;3],[1,2,3,4,5] |

å­˜åœ¨ä¸¤ç§å†™æ³•

```rust
let a : [i32;5] = [1,2,3,4,5]

let a : [i32;5] = [3;5] 
// ç­‰ä»·äº [3,3,3,3,3]
```

ä¸å…¶ä»–è¯­è¨€è®¿é—®æ•°ç»„å…ƒç´ æ–¹æ³•ä¸€è‡´

```rust
let a : [i32;5] = [1,2,3,4,5]

a[0] // 1
```

æ•°ç»„çš„æ‰“å°æ–¹å¼ä¸ä¸€èˆ¬ç±»å‹æ‰“å°æ–¹å¼ä¸åŒ

```rust
    let mut a: [i8; 10] = [42; 10];
    println!("a:{a:?}");
    //æˆ–è€…å¦‚ä¸‹æ–¹å¼
    println!("a:{a:#?}"); //æ‰“å°å‡ºæ¥æ›´å¥½çœ‹
```



### å‡½æ•°(`Functions`)





### æ§åˆ¶æµ(`Control Flow`)





## å‚è€ƒèµ„æ–™

[Rustå®˜ç½‘](https://www.rust-lang.org/)

[Rustç¨‹åºè®¾è®¡è¯­è¨€](https://kaisery.github.io/trpl-zh-cn/title-page.html)

[ç»™Androidå¼€å‘è€…çš„Rustç»¼åˆå­¦ä¹ (Googleå‡ºå“)](https://google.github.io/comprehensive-rust/welcome.html)

